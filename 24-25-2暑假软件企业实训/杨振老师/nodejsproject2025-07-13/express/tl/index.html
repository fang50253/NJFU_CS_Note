<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<!--1.a标签，超链接，只支持get请求-->

<a href="http://localhost:3009/add">访问后台</a>

<!--2.form表单，既支持post，也支持get，form表单传姓名年龄，然后再返回-->

<form action="http://localhost:3009/addStu" method="post">
    姓名：<input type="text" name="name" required>
    年龄：<input type="number" name="age" required>
    <!--    <button type="submit">提交</button>-->
</form>

<!--3.ajax请求  局部网页刷新请求   jQuery ...还有一些-->

<button>ajax发起get请求</button>
<button>ajax发起post请求</button>

<script src="./js/jquery-3.7.1.min.js"></script>
<script>
    //jquery的ready函数 相当于window.onload
    $(function(){
        //为第一个按钮绑定点击事件
        $('button:eq(0)').click(function () {
            //发起get请求
            $.ajax({
                url: 'http://localhost:3009/add',
                type: 'GET',
                data: {
                    name: '张三',
                    age: 20
                },
                dataType: 'json',
                success: function (data) {
                    //返回的数据展示在页面，插入到按钮下面
                    //把后台返回的数据全部展示在页面上
                    $('button:eq(0)').after(JSON.stringify(data));
                    // $('button:eq(0)').after(data.message)
                }
            });
        });
        // 为第二个按钮绑定点击事件
        $('button:eq(1)').click(function () {
            // 从表单获取数据
            const name = $('input[name="name"]').val();
            const age = $('input[name="age"]').val();

            // 验证输入
            if (!name || !age) {
                alert('请输入姓名和年龄');
                return;
            }

            // 发起 POST 请求
            $.ajax({
                url: 'http://localhost:3009/addStu',
                type: 'POST',
                data: {
                    name: name,
                    age: age
                },
                dataType: 'json',
                success: function (data) {
                    // 返回的数据展示在页面，插入到按钮下面
                    $('button:eq(1)').after('<div class="mt-2 p-2 bg-gray-100 rounded">' + JSON.stringify(data) + '</div>');

                    // 清空表单
                    $('input[name="name"]').val('');
                    $('input[name="age"]').val('');
                },
                error: function (error) {
                    console.error('POST 请求失败:', error);
                    $('button:eq(1)').after('<div class="mt-2 p-2 bg-red-100 text-red-700 rounded">请求失败: ' + error.statusText + '</div>');
                }
            });
        });


    })
</script>


</body>
</html>