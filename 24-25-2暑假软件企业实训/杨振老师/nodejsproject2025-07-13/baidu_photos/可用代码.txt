<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<input type="file" id="imgid">
<img src="" id="img" width="200px">
<button>图像识别</button>
<script src="./js/jquery-3.7.1.min.js"></script>
<script>
    $(function () {
        var base64 = ""; // 定义全局变量存储 base64

        $('#imgid').change(function () {
            var file = this.files[0];
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#img').attr('src', e.target.result);
                base64 = e.target.result; // 更新全局变量
            };
            reader.readAsDataURL(file);
        });

        $('button').click(function() {

                var token="24.9cb2f86472f794dcdc99d1efac1cedce.2592000.1755228219.282335-119519830";
                $.ajax({
                    type: "POST",
                    url: "https://aip.baidubce.com/rest/2.0/image-classify/v2/advanced_general?access_token="+token,
                    data: {
                        "image": base64
                    },
                    success: function(data) {
                        alert(JSON.stringify(data));
                    }
                });
        });
    });
</script>
</body>
</html>